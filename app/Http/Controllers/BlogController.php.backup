<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;

class BlogController extends Controller
{
    /**
     * Get hardcoded blog posts
     */
    private function getBlogPosts()
    {
        return [
            [
                'slug' => 'essential-guide-to-choosing-right-caregiver',
                'title' => 'Essential Guide to Choosing the Right Caregiver',
                'excerpt' => 'Learn the key factors to consider when selecting a caregiver for your loved ones, including qualifications, experience, and compatibility.',
                'content' => '
                    <p>Choosing the right caregiver is one of the most important decisions you\'ll make for your family. Whether you\'re looking for elderly care, childcare, or specialized assistance, finding a qualified and compassionate caregiver requires careful consideration and planning.</p>
                    
                    <img src="https://images.pexels.com/photos/3768131/pexels-photo-3768131.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Family multigenerational care" style="width: 100%; border-radius: 10px; margin: 20px 0;">
                    
                    <h2>Understanding Your Care Needs</h2>
                    <p>Before beginning your search, it\'s crucial to assess the specific needs of your loved one. Consider the level of care required, whether it\'s basic companionship, assistance with daily activities, or specialized medical care. Document any medical conditions, mobility issues, dietary restrictions, and personal preferences.</p>
                    
                    <h2>Key Qualifications to Look For</h2>
                    <p>A qualified caregiver should possess:</p>
                    <ul>
                        <li><strong>Proper Certification:</strong> CPR, First Aid, and relevant caregiving certifications</li>
                        <li><strong>Experience:</strong> Proven track record in similar care situations</li>
                        <li><strong>Background Check:</strong> Clean criminal record and verified references</li>
                        <li><strong>Training:</strong> Specialized training for specific conditions if needed</li>
                        <li><strong>Insurance:</strong> Proper liability and workers compensation coverage</li>
                    </ul>
                    
                    <img src="https://images.pexels.com/photos/6646918/pexels-photo-6646918.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Caregiver with elderly person" style="width: 100%; border-radius: 10px; margin: 20px 0;">
                    
                    <h2>The Interview Process</h2>
                    <p>When interviewing potential caregivers, ask about their experience with similar cases, their approach to care, and how they handle emergencies. Observe their communication style and demeanor. A good caregiver should be patient, empathetic, and demonstrate genuine interest in your loved one\'s wellbeing.</p>
                    
                    <h2>Compatibility Matters</h2>
                    <p>Beyond qualifications, personal compatibility is essential. The caregiver will spend significant time with your loved one, so personality fit, shared interests, and communication style matter greatly. Consider arranging a trial period to ensure everyone is comfortable.</p>
                    
                    <h2>Trust Your Platform</h2>
                    <p>At CAS Private Care, all our caregivers are thoroughly vetted, certified, and continuously monitored to ensure the highest quality of care. We make the selection process easier by connecting you with pre-qualified professionals who match your specific needs.</p>
                ',
                'category' => 'Tips & Guides',
                'author' => 'CAS Care Team',
                'image' => 'https://images.pexels.com/photos/3768131/pexels-photo-3768131.jpeg?auto=compress&cs=tinysrgb&w=800',
                'published_at' => '2025-12-28',
                'reading_time' => '5 min read'
            ],
            [
                'slug' => 'understanding-elderly-care-needs',
                'title' => 'Understanding Elderly Care Needs and Requirements',
                'excerpt' => 'A comprehensive look at the different types of elderly care services and how to determine what level of care your loved one needs.',
                'content' => '
                    <p>As our loved ones age, their care needs evolve and become more complex. Understanding these changing needs is crucial for providing appropriate support and ensuring their safety, comfort, and quality of life.</p>
                    
                    <img src="https://images.pexels.com/photos/3768131/pexels-photo-3768131.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Elderly care and family support" style="width: 100%; border-radius: 10px; margin: 20px 0;">
                    
                    <h2>Types of Elderly Care Services</h2>
                    <p>Elderly care encompasses various levels of support:</p>
                    <ul>
                        <li><strong>Companionship Care:</strong> Social interaction and light assistance with daily activities</li>
                        <li><strong>Personal Care:</strong> Help with bathing, dressing, grooming, and mobility</li>
                        <li><strong>Skilled Nursing Care:</strong> Medical care provided by licensed nurses</li>
                        <li><strong>Memory Care:</strong> Specialized care for dementia and Alzheimer\'s patients</li>
                        <li><strong>Respite Care:</strong> Temporary relief for family caregivers</li>
                    </ul>
                    
                    <h2>Assessing Care Needs</h2>
                    <p>Consider these factors when determining the appropriate level of care:</p>
                    
                    <img src="https://images.pexels.com/photos/3768997/pexels-photo-3768997.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Caring for elderly family member" style="width: 100%; border-radius: 10px; margin: 20px 0;">
                    
                    <h3>Physical Health</h3>
                    <p>Evaluate mobility, chronic conditions, medication management needs, and assistance required for daily living activities.</p>
                    
                    <h3>Cognitive Function</h3>
                    <p>Assess memory, decision-making ability, and any signs of cognitive decline that may require specialized care.</p>
                    
                    <h3>Safety Concerns</h3>
                    <p>Identify fall risks, home safety issues, and the ability to live independently.</p>
                    
                    <h2>Creating a Care Plan</h2>
                    <p>A comprehensive care plan should address medical needs, daily routines, social activities, dietary requirements, and emergency protocols. Regular reassessment ensures the plan evolves with changing needs.</p>
                    
                    <h2>Finding the Right Support</h2>
                    <p>CAS Private Care connects families with experienced caregivers who specialize in elderly care. Our professionals are trained to provide compassionate, personalized support tailored to each individual\'s unique needs.</p>
                ',
                'category' => 'Elderly Care',
                'author' => 'Dr. Sarah Johnson',
                'image' => 'https://images.pexels.com/photos/3768131/pexels-photo-3768131.jpeg?auto=compress&cs=tinysrgb&w=800',
                'published_at' => '2025-12-25',
                'reading_time' => '7 min read'
            ],
            [
                'slug' => 'benefits-of-professional-home-care',
                'title' => 'The Benefits of Professional Home Care Services',
                'excerpt' => 'Discover why professional home care is often the best choice for seniors who want to maintain independence while receiving quality care.',
                'content' => '
                    <p>Professional home care services have become increasingly popular as families seek alternatives to nursing homes and assisted living facilities. The ability to receive quality care in the comfort of one\'s own home offers numerous benefits for both seniors and their families.</p>
                    
                    <img src="https://images.pexels.com/photos/6646917/pexels-photo-6646917.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Home care with family" style="width: 100%; border-radius: 10px; margin: 20px 0;">
                    
                    <h2>Comfort and Familiarity</h2>
                    <p>Remaining in a familiar environment surrounded by personal belongings, memories, and loved ones provides significant emotional comfort. This familiarity can reduce stress and anxiety, particularly for seniors with cognitive challenges.</p>
                    
                    <h2>Personalized One-on-One Care</h2>
                    <p>Unlike facility-based care, home care provides dedicated attention tailored to individual needs, preferences, and schedules. Caregivers can focus entirely on one client, ensuring comprehensive and attentive support.</p>
                    
                    <img src="https://images.pexels.com/photos/3768131/pexels-photo-3768131.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Family caregiving at home" style="width: 100%; border-radius: 10px; margin: 20px 0;">
                    
                    <h2>Cost-Effective Solution</h2>
                    <p>Home care is often more affordable than residential facilities while providing comparable or superior care quality. Families can choose the level and frequency of care needed, making it a flexible financial option.</p>
                    
                    <h2>Independence and Dignity</h2>
                    <p>Professional home care allows seniors to maintain their independence and daily routines while receiving necessary support. This autonomy is crucial for mental health and overall quality of life.</p>
                    
                    <h2>Family Peace of Mind</h2>
                    <p>Knowing that a trained professional is providing care offers families tremendous peace of mind, especially when they cannot be present themselves. Regular updates and communication keep families informed and involved.</p>
                    
                    <h2>Comprehensive Services</h2>
                    <p>Modern home care includes a wide range of services from basic companionship to skilled nursing care, medication management, physical therapy, and specialized care for conditions like dementia or Parkinson\'s disease.</p>
                    
                    <p><strong>Ready to explore home care options?</strong> CAS Private Care connects you with qualified professionals who can provide the personalized support your loved one needs in the comfort of home.</p>
                ',
                'category' => 'Home Care',
                'author' => 'Maria Rodriguez',
                'image' => 'https://images.pexels.com/photos/6646917/pexels-photo-6646917.jpeg?auto=compress&cs=tinysrgb&w=800',
                'published_at' => '2025-12-22',
                'reading_time' => '6 min read'
            ],
            [
                'slug' => 'childcare-safety-tips',
                'title' => '10 Essential Childcare Safety Tips Every Parent Should Know',
                'excerpt' => 'Keep your children safe with these expert-recommended safety tips and best practices for choosing and working with childcare providers.',
                'content' => '
                    <p>Child safety is paramount when it comes to selecting care providers. As a parent, ensuring your child is in safe, capable hands is your top priority. Here are the top 10 safety tips every parent should know when choosing and working with childcare providers.</p>
                    
                    <img src="https://images.pexels.com/photos/1648387/pexels-photo-1648387.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Family with children" style="width: 100%; border-radius: 10px; margin: 20px 0;">
                    
                    <h2>1. Verify Credentials and Background</h2>
                    <p>Always conduct thorough background checks including criminal records, childcare certifications, CPR/First Aid training, and references from previous families. Don\'t skip this crucial step.</p>
                    
                    <h2>2. Check the Environment</h2>
                    <p>Visit the care location in person. Look for safety hazards, childproofing measures, clean spaces, and age-appropriate toys and equipment.</p>
                    
                    <img src="https://images.pexels.com/photos/4473796/pexels-photo-4473796.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Parent and child bonding" style="width: 100%; border-radius: 10px; margin: 20px 0;">
                    
                    <h2>3. Establish Clear Communication</h2>
                    <p>Set up regular check-ins, emergency contact protocols, and daily update routines. Use apps or journals to track activities, meals, and any concerns.</p>
                    
                    <h2>4. Create Emergency Plans</h2>
                    <p>Ensure caregivers know emergency procedures, have access to medical information, and understand when to contact you or seek medical attention.</p>
                    
                    <h2>5. Set Clear Boundaries and Rules</h2>
                    <p>Document your expectations regarding discipline, screen time, outdoor activities, visitors, and other important guidelines in writing.</p>
                    
                    <h2>6. Monitor and Stay Involved</h2>
                    <p>Make surprise visits when possible, talk to your children about their day, and watch for any behavioral changes that might indicate problems.</p>
                    
                    <h2>7. Trust Your Instincts</h2>
                    <p>If something feels off, investigate immediately. Your parental instincts are valuableâ€”never ignore them.</p>
                    
                    <h2>8. Ensure Proper Supervision Ratios</h2>
                    <p>Verify that caregiver-to-child ratios meet recommended standards for your child\'s age group to ensure adequate attention and safety.</p>
                    
                    <h2>9. Review Insurance and Liability</h2>
                    <p>Confirm that the caregiver or facility has proper insurance coverage and understand what\'s covered in case of accidents or emergencies.</p>
                    
                    <h2>10. Use a Trusted Platform</h2>
                    <p>When booking through CAS Private Care, all providers are pre-screened, certified, and continuously monitored to ensure the highest safety standards for your children.</p>
                ',
                'category' => 'Childcare',
                'author' => 'Emily Chen',
                'image' => 'https://images.pexels.com/photos/1648387/pexels-photo-1648387.jpeg?auto=compress&cs=tinysrgb&w=800',
                'published_at' => '2025-12-20',
                'reading_time' => '8 min read'
            ],
            [
                'slug' => 'managing-caregiver-burnout',
                'title' => 'Managing Caregiver Burnout: Self-Care Tips for Caregivers',
                'excerpt' => 'Caregiving can be demanding. Learn how to recognize burnout signs and implement self-care strategies to maintain your wellbeing.',
                'content' => '<p>Caregiver burnout is a real concern that affects many dedicated professionals and family caregivers. Learn how to recognize the signs and implement effective self-care strategies.</p>
                
                <img src="https://images.pexels.com/photos/3759657/pexels-photo-3759657.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Self-care and wellness" style="width: 100%; border-radius: 10px; margin: 20px 0;">
                
                <h2>Understanding Caregiver Burnout</h2>
                <p>Burnout occurs when physical, emotional, and mental exhaustion overwhelms caregivers. Recognizing early warning signs is crucial for maintaining your health and providing quality care.</p>',
                'category' => 'Caregiver Resources',
                'author' => 'CAS Care Team',
                'image' => 'https://images.pexels.com/photos/3759657/pexels-photo-3759657.jpeg?auto=compress&cs=tinysrgb&w=800',
                'published_at' => '2025-12-18',
                'reading_time' => '5 min read'
            ],
            [
                'slug' => 'dementia-care-strategies',
                'title' => 'Effective Strategies for Dementia Care at Home',
                'excerpt' => 'Expert advice on caring for loved ones with dementia, including communication techniques, safety measures, and daily routine management.',
                'content' => '<p>Caring for someone with dementia requires patience, understanding, and specialized knowledge. These strategies can help you provide compassionate, effective care at home.</p>
                
                <img src="https://images.pexels.com/photos/7551608/pexels-photo-7551608.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Dementia care support" style="width: 100%; border-radius: 10px; margin: 20px 0;">
                
                <h2>Communication Techniques</h2>
                <p>Use simple sentences, maintain eye contact, and be patient. Allow time for responses and avoid correcting or arguing with your loved one.</p>',
                'category' => 'Elderly Care',
                'author' => 'Dr. Michael Thompson',
                'image' => 'https://images.pexels.com/photos/7551608/pexels-photo-7551608.jpeg?auto=compress&cs=tinysrgb&w=800',
                'published_at' => '2025-12-15',
                'reading_time' => '10 min read'
            ],
            [
                'slug' => 'nutrition-tips-for-seniors',
                'title' => 'Nutrition and Meal Planning for Seniors',
                'excerpt' => 'Learn how to create balanced, nutritious meals that meet the specific dietary needs of elderly individuals.',
                'content' => '<p>Proper nutrition is essential for maintaining health and vitality in our senior years. Here are practical meal planning tips for elderly care.</p>
                
                <img src="https://images.pexels.com/photos/6195116/pexels-photo-6195116.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Healthy senior meals" style="width: 100%; border-radius: 10px; margin: 20px 0;">
                
                <h2>Essential Nutrients for Seniors</h2>
                <p>Focus on calcium for bone health, fiber for digestion, protein for muscle maintenance, and vitamins B12 and D which become more important with age.</p>',
                'category' => 'Health & Wellness',
                'author' => 'Nutritionist Lisa Parker',
                'image' => 'https://images.pexels.com/photos/6195116/pexels-photo-6195116.jpeg?auto=compress&cs=tinysrgb&w=800',
                'published_at' => '2025-12-12',
                'reading_time' => '6 min read'
            ],
            [
                'slug' => 'becoming-professional-caregiver',
                'title' => 'How to Become a Professional Caregiver',
                'excerpt' => 'A step-by-step guide to starting your career in caregiving, including required certifications, training, and skills needed.',
                'content' => '<p>Interested in becoming a professional caregiver? This comprehensive guide covers everything you need to know to start a rewarding career in caregiving.</p>
                
                <img src="https://images.pexels.com/photos/5327585/pexels-photo-5327585.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Professional caregiver training" style="width: 100%; border-radius: 10px; margin: 20px 0;">
                
                <h2>Required Certifications</h2>
                <p>Most states require CPR and First Aid certification. Consider additional certifications in specialized areas like dementia care or medication administration.</p>',
                'category' => 'Caregiver Resources',
                'author' => 'CAS Training Center',
                'image' => 'https://images.pexels.com/photos/5327585/pexels-photo-5327585.jpeg?auto=compress&cs=tinysrgb&w=800',
                'published_at' => '2025-12-10',
                'reading_time' => '9 min read'
            ],
            [
                'slug' => 'technology-in-caregiving',
                'title' => 'How Technology is Transforming Modern Caregiving',
                'excerpt' => 'Explore the latest technologies and innovations that are making caregiving more efficient, safer, and more effective.',
                'content' => '<p>Technology is revolutionizing the caregiving industry. From monitoring systems to communication tools, modern innovations are making care more accessible and effective.</p>
                
                <img src="https://images.pexels.com/photos/8378748/pexels-photo-8378748.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Technology in healthcare" style="width: 100%; border-radius: 10px; margin: 20px 0;">
                
                <h2>Smart Home Devices</h2>
                <p>Voice assistants, smart lighting, and automated medication dispensers help seniors maintain independence while staying safe at home.</p>',
                'category' => 'Industry News',
                'author' => 'Tech Analyst James Wilson',
                'image' => 'https://images.pexels.com/photos/8378748/pexels-photo-8378748.jpeg?auto=compress&cs=tinysrgb&w=800',
                'published_at' => '2025-12-08',
                'reading_time' => '7 min read'
            ]
        ];
    }

    /**
     * Display a listing of blog posts
     */
    public function index(Request $request)
    {
        $allPosts = $this->getBlogPosts();
        
        // Get unique categories
        $categories = collect($allPosts)
            ->pluck('category')
            ->unique()
            ->sort()
            ->values();

        // Filter by category if provided
        if ($request->has('category') && $request->category !== 'all') {
            $allPosts = array_filter($allPosts, function($post) use ($request) {
                return $post['category'] === $request->category;
            });
        }

        // Search functionality
        if ($request->has('search') && !empty($request->search)) {
            $search = strtolower($request->search);
            $allPosts = array_filter($allPosts, function($post) use ($search) {
                return stripos($post['title'], $search) !== false ||
                       stripos($post['excerpt'], $search) !== false ||
                       stripos($post['content'], $search) !== false;
            });
        }

        // Convert to collection for easier handling
        $posts = collect(array_values($allPosts));

        return view('blog.index', compact('posts', 'categories'));
    }

    /**
     * Display the specified blog post
     */
    public function show($slug)
    {
        $allPosts = $this->getBlogPosts();
        
        $post = collect($allPosts)->firstWhere('slug', $slug);

        if (!$post) {
            abort(404);
        }

        // Convert to object for easier template access
        $post = (object) $post;

        // Get related posts from same category
        $relatedPosts = collect($allPosts)
            ->where('category', $post->category)
            ->where('slug', '!=', $post->slug)
            ->take(3)
            ->map(function($item) {
                return (object) $item;
            });

        return view('blog.show', compact('post', 'relatedPosts'));
    }

    /**
     * Display posts by category
     */
    public function category($category)
    {
        $allPosts = $this->getBlogPosts();
        
        // Filter by category
        $posts = collect($allPosts)
            ->where('category', $category)
            ->map(function($item) {
                return (object) $item;
            });

        // Get unique categories
        $categories = collect($allPosts)
            ->pluck('category')
            ->unique()
            ->sort()
            ->values();

        return view('blog.index', compact('posts', 'categories', 'category'));
    }
}
